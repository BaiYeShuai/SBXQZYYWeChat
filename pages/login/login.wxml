<!-- pages/login/login.wxml -->
<view class="login-container">
  <view class="login-header">
    <image src="/images/logo.png" class="logo"></image>
    <text class="title">体检报告查询</text>
    <text class="subtitle">请输入信息登录查询</text>
  </view>

  <view class="login-form">
    <!-- 身份证号 -->
    <view class="input-item">
      <text class="input-label">身份证号</text>
      <input 
        class="input-field" 
        placeholder="请输入18位身份证号" 
        data-field="idCard"
        value="{{idCard}}"
        bindinput="onInputChange"
        maxlength="18"
      />
    </view>

    <!-- 手机号 -->
    <view class="input-item">
      <text class="input-label">手机号</text>
      <input 
        class="input-field" 
        placeholder="请输入手机号" 
        data-field="phoneNumber"
        value="{{phoneNumber}}"
        bindinput="onInputChange"
        type="number"
        maxlength="11"
      />
    </view>

    <!-- 验证码 -->
    <view class="input-item verify-code">
      <view class="code-input">
        <text class="input-label">验证码</text>
        <input 
          class="input-field" 
          placeholder="请输入6位验证码" 
          data-field="verifyCode"
          value="{{verifyCode}}"
          bindinput="onInputChange"
          type="number"
          maxlength="6"
        />
      </view>
      <button 
        class="get-code-btn" 
        bindtap="getVerifyCode"
        disabled="{{!canGetCode || isCodeLoading}}"
      >
        {{codeText}}
      </button>
    </view>

    <!-- 错误提示 -->
    <text class="login-tips">{{errorTips}}</text>

    <!-- 登录按钮 -->
    <button 
      class="login-btn" 
      bindtap="login"
      disabled="{{!canLogin || isLoading}}"
    >
      登录查询
    </button>
  </view>

  <view class="login-footer">
    <text>如有疑问，请联系客服</text>
  </view>

  <!-- 加载状态 -->
  <view class="loading" wx:if="{{isLoading || isCodeLoading}}">
    <view class="custom-loading"></view>
    <text wx:if="{{isLoading}}">登录中...</text>
    <text wx:if="{{isCodeLoading}}">发送验证码中...</text>
  </view>
</view>
    